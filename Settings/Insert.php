<?php    // Will check if the file has already been included, and if so, not include (require) it again.    require_once('../config.php');    // Creating array whitch represents database connection info.    $db = $config['db'];    // This variable contains function whitch opens a new connection to the MySQL server.    $con = mysqli_connect($db['host'], $db['user'], $db['password'],$db['database']);    // Variables from fetched hashmap.    $id = $_GET["id"];    $table = $_GET["table"];    $RESULT = $_GET["RESULT"];    $date = $_GET["date"];     // Check how many duplicated `date` rows are in table as total column.    $sql_date_counter = "SELECT COUNT(*) as total FROM `$table` WHERE `id` = '$id' AND `date` = '$date' ";    $date_counter = mysqli_query($con, $sql_date_counter);    // This variable contains number with duplicated row number.    $dup_num = mysqli_fetch_assoc($date_counter);    $duplicated = $dup_num['total'];        $response = array();    if ($table == "user_height" || $table == "user_weight" || $table == "user_somatotype" || $table == "user_calories_limit")     {        // If any of our variables is null, then response error, else        // if duplicated number equals 0, if so, then INSERT,        // and put true into the $response table.        // else put false into the response table.        if ( $id == NULL || $RESULT == NULL || $date == NULL )         {            $response["error"] = true;        }        elseif ($duplicated == 0 )         {            $statement = mysqli_prepare($con, "INSERT INTO `$table` (id, RESULT, date) VALUES (?, ?, ?)");            mysqli_stmt_bind_param($statement, "iss", $id, $RESULT, $date);            mysqli_stmt_execute($statement);                $response["insert"] = true;        }        else        {            $sql_update = "UPDATE `$table` SET `RESULT` = '$RESULT' WHERE `date`= '$date' AND `id` = '$id' ";            $update = mysqli_query($con, $sql_update);                $response["update"] = true;        }    }    elseif ($table == "user_diet_ratio")     {        if ( $id == NULL || $RESULT == NULL || $date == NULL )         {            $response["error"] = true;        }          elseif ($duplicated == 0 )         {            $RATIO_RESULT = explode(":", $RESULT);            $statement = mysqli_prepare($con, "INSERT INTO `$table` (id, proteins, fats, carbs, date) VALUES (?, ?, ?, ?, ?)");            mysqli_stmt_bind_param($statement, "issss", $id, $RATIO_RESULT[0], $RATIO_RESULT[1], $RATIO_RESULT[2], $date);            mysqli_stmt_execute($statement);                $response["insert"] = true;        }        else        {            $RATIO_RESULT = explode(":", $RESULT);            $sql_update = "UPDATE `$table` SET `proteins` = $RATIO_RESULT[0] , `fats` = $RATIO_RESULT[1] , `carbs` = $RATIO_RESULT[2] WHERE `date`= '$date' AND `id` = '$id' ";            $update = mysqli_query($con, $sql_update);                $response["update"] = true;        }    }        // Generating JSON response whitch will contain     echo json_encode(array("server_response"=>$response));    mysqli_close($con);    // {    // "success": true or false    // }